<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd" >
<mapper namespace="noticeMapper">


	<resultMap id="noticeResultSet" type="notice">
		<result column="NOTICE_NO" property="noticeNo"/>
		<result column="NOTICE_TITLE" property="noticeTitle"/>
		<result column="NOTICE_CONTENT" property="noticeContent"/>
		<result column="NOTICE_DATE" property="noticeDate"/>
		<result column="NOTICE_COUNT" property="noticeCount"/>
	</resultMap>

	<select id="selectListCount" resultType="_int">
		SELECT COUNT(*) COUNT
		  FROM NOTICE
		 WHERE NOTICE_STATUS = 'Y'
	</select>
	
	<select id="selectList" resultMap="noticeResultSet">
		SELECT NOTICE_NO
			 , NOTICE_TITLE
			 , TO_CHAR(NOTICE_DATE, 'YYYY-MM-DD') NOTICE_DATE 
		  FROM NOTICE
		 WHERE NOTICE_STATUS='Y'
		 ORDER BY NOTICE_NO DESC
	</select>
	
	<insert id="insertNotice" parameterType="notice">
		INSERT INTO NOTICE (NOTICE_NO
						  , NOTICE_TITLE
						  , NOTICE_CONTENT)
					VALUES (SEQ_NOTICE_NO.NEXTVAL
						  , #{noticeTitle}
						  , #{noticeContent})
	</insert>
	
	<update id="increaseCount" parameterType="_int">
		UPDATE NOTICE
		   SET NOTICE_COUNT = NOTICE_COUNT + 1
		 WHERE NOTICE_NO = #{noticeNo}
		   AND NOTICE_STATUS = 'Y'
	</update>
	
	<select id="selectNotice" parameterType="_int" resultMap="noticeResultSet">
		SELECT NOTICE_NO
			 , NOTICE_TITLE
			 , NOTICE_CONTENT
			 , TO_CHAR(NOTICE_DATE, 'YYYY-MM-DD') NOTICE_DATE
			 , NOTICE_COUNT
		  FROM NOTICE
		 WHERE NOTICE_NO BETWEEN (#{noticeNo}-1) AND (#{noticeNo}+1)
		   AND NOTICE_STATUS='Y'
	</select>
	
	<select id="selectUpdateNotice" parameterType="_int" resultMap="noticeResultSet">
		SELECT NOTICE_NO
			 , NOTICE_TITLE
			 , NOTICE_CONTENT
			 , TO_CHAR(NOTICE_DATE, 'YYYY-MM-DD') NOTICE_DATE
			 , NOTICE_COUNT
		  FROM NOTICE
		 WHERE NOTICE_NO = #{noticeNo}
		   AND NOTICE_STATUS='Y'
	</select>
	
	<update id="updateNotice" parameterType="notice">
		UPDATE NOTICE
		   SET NOTICE_TITLE = #{noticeTitle}
		     , NOTICE_CONTENT = #{noticeContent}
		     , NOTICE_DATE = SYSDATE
		 WHERE NOTICE_NO = #{noticeNo}
	</update>
	
	<update id="deleteNotice" parameterType="_int">
		UPDATE NOTICE
		   SET NOTICE_STATUS = 'N'
		 WHERE NOTICE_NO = #{noticeNo}
	</update>
	

</mapper>